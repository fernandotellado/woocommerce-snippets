function ayudawp_checkout_productos_gratis() {
    // Comprobamos donde estamos
    if ( function_exists( 'is_checkout' ) && ( ! ( is_checkout() || is_ajax() ) || ( ( is_checkout() || is_ajax() ) && WC()->cart->needs_payment() ) ) ) {
        return;
    }

    // Quitamos formularios de cupones porque sobran para productos gratis
    remove_action( 'woocommerce_before_checkout_form', 'woocommerce_checkout_coupon_form', 10 );

    // Quitamos las notas de info adicional
    add_filter( 'woocommerce_enable_order_notes_field', '__return_false' );

    // Quitamos campos que no hacen falta en un checkout gratis
    function wc_unset_unwanted_checkout_fields( $fields ) {
        // Agrega o quita campos de facturacion que no quieras
        // @link http://docs.woothemes.com/document/tutorial-customising-checkout-fields-using-actions-and-filters/#section-2
        $billing_keys = array(
            'billing_company',
            'billing_phone',
            'billing_address_1',
            'billing_address_2',
            'billing_city',
            'billing_postcode',
            'billing_country',
            'billing_state',
        );

        // Para cada campo de facturacion qu eno quieras, unset.
        foreach( $billing_keys as $key ) {
            unset( $fields['billing'][$key] );
        }

        return $fields;
    }
    add_filter( 'woocommerce_checkout_fields', 'wc_unset_unwanted_checkout_fields' );

    // Un poco de CSS opcional para los campos de cuenta
    function wc_print_custom_css() {
        ?>
        <style>
            .create-account {
                margin-top: 6em;
            }
        </style>
        <?php
    }
    add_action( 'wp_head', 'wc_print_custom_css' );
}
add_action( 'wp', 'ayudawp_checkout_productos_gratis' );
